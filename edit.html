<!DOCTYPE html>
<!-- dkdkdkdk -->
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" , initial-scale="1">
  <title></title>
  <!-- JQuery CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" ?></script>
  <!-- 최신 자바스크립트 -->
  <script src="js/bootstrap.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/stylesheet.css">
  <link rel="stylesheet" href="css/style2.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
  <script src="/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="edit.css">
</head>

<body>
  <style type="text/css">
    nav a:link {
      text-decoration: none;
      color: white;
    }

    nav a:visited {
      text-decoration: none;
      color: white;
    }

    nav a:active {
      text-decoration: none;
      color: white;
    }

    nav a:hover {
      text-decoration: underline;
      color: white;
    }
  </style>
  <!-- 상단 네비게이트 바 -->
  <nav class="navcolor navbar navbar-expand-lg text-uppercase fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand text-white" href="index.html">Writing Travel</a>
      <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false">
        <i class="fa fa-bars"></i>
      </button>

      <div class="collapse navbar-collapse " id="navbarResponsive">
        <ul class="navbar-nav ml-auto navbar-right">
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id="logout_icon" style="color:white;">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- 상단 네비게이트 바 끝 -->
  <section style="padding-top: 70px; padding-bottom: 70px;">
    <h1 class="title text-center" style="padding-left: 70px;">EDIT</h1><br><br><br><br>

    <!-- 폼 시작 action="edit_insert_.php"target="ifrm"-->

    <form name='frm' style="padding-left: 90px;" method="POST" enctype="multipart/form-data" >
      <!-- 제목, 이미지 중 고르기 라디오-->
      <div class="text-center">
        <div class="btn-group btn-group-toggle" name="radioGroup" id="radioGroup" data-toggle="buttons">
          <label class="btn btn-info">
            <input type="radio" name="jb-radio-1" value="1" id="jb-radio-1"> 제목
          </label>
          <label class="btn btn-info">
            <input type="radio" name="jb-radio-1" value="2" id="jb-radio-2"> 이미지
          </label>
        </div>
        <br><br>
    <!--    <div class="custom-control custom-radio">
          <input type="radio" name="jb-radio" value="2" id="jb-radio-1" class="custom-control-input">
          <label class="custom-control-label" for="jb-radio-1">제목</label>
        </div>
        <div class="custom-control custom-radio">
          <input type="radio" name="jb-radio" value="1" id="jb-radio-2" class="custom-control-input">
          <label class="custom-control-label" for="jb-radio-2">이미지</label>
        </div> -->
      </div>
      <!-- 제목, 이미지 중 고르기 라디오 끝-->
      <!-- 일정입력 -->
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">일정</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="pl_place" name="place" maxlength='15' val='' placeholder="장소을 입력해주세요! (15자 이내)">
        </div>
      </div><br>
      <!-- 일정입력 끝 -->
      <!-- 제목입력 -->
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">제목</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="pl_tit" name="pl_tit" maxlength='30' placeholder="제목를 입력해주세요! (30자 이내)">
        </div>
      </div>
      <!-- 제목입력 끝 -->
      <!-- 내용입력 -->
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">내용</label>
        <div class="col-sm-10">
          <textarea rows="5" cols="55" id="pl_txt" name="pl_txt" placeholder="내용을 입력해주세요!"></textarea>
        </div>
      </div><br>
      <div class="text-center">
        <!-- 내용입력 끝 -->

        <input type="file" id="uploadfile" name="uploadfile" onclick="picChkFunc()" accept="image/gif, image/jpeg, image/png" />
        <input type="text" id="pl_num" name="pl_num" style="display:none;" />
        <input type="text" id="picChk" name="picChk" style="display:none;" />
        <input type="text" id="pl_rod" name="pl_rod" style="display:none;" />
        <input type="button" id="uploadBtn" name="uploadBtn" class="btn btn-sm btn-secondary" id="uploadbutton" value="업로드" />

      </div>

      <br><br>
      <div class="text-center">
        <button type="button" class="btn btn-sm btn-secondary" id="btnCancel" onclick="location.href='plan.html' ">취소</button>
        <button type="submit" class="btn btn-sm btn-primary" id="btnSave">저장</button>
      </div>
    </form>
  <!--  <iframe name="ifrm" style="display:none;"></iframe>-->
  </section>
  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container">
      <a class="btn btn-outline-light btn-social mx-1" href="#">
        <i class="fab fa-facebook-square fa-3x"></i>
      </a>
      <a class="btn btn-outline-light btn-social mx-1" href="#">
        <i class="fab fa-twitter fa-3x"></i>
      </a>
      <a class="btn btn-outline-light btn-social mx-1" href="#">
        <i class="fab fa-instagram fa-3x"></i>
      </a>
    </div>
    </div>
  </footer>
  <!-- Footer 끝-->


  <!-- Copyright -->
  <section class="copyright py-4 text-center text-white">
    <div class="container">
      <small>Copyright &copy; WRITINGTRAVEL 2019</small>
    </div>
  </section>
  <!-- Copyright 끝 -->

  <script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script type="text/javascript">
    var url = location.href; // 현재 URL 가져오기
    var plnum = url.substring(url.indexOf('?') + 1, url.length); //plnum
    document.getElementById("pl_num").value = plnum;
    var day_day;
    var place;
    var tit;
    var pic;
    var imagedata;
    var txt;
    var money;
    var picChk = 0;
    /*사진이 없으면 0, 저장된 사진 그대로 쓸거면 1 or 덮어쓰기, 새로 저장 하면 2*/
    $.ajax({
      url: 'edit_fetch_.php',
      type: 'POST',
      data: {
        plnum //plnum.
      },
      success: function(result) {
        //alert(result);
        var temp = result.split(",");
        day_day = temp[0];
        place = temp[1];
        tit = temp[2];
        pic = temp[3];
        if (pic != "null") picChk = pic;
        txt = temp[4];
        rod = temp[5];
        money = temp[6];

        // 아래 값이 !=null 이면 출력하게 해봐
        if (place != 'null') document.getElementById("pl_place").value = place;
        if (tit != 'null') document.getElementById("pl_tit").value = tit;
        if (txt != 'null') document.getElementById("pl_txt").value = txt;
        //document.getElementById("pl_pic").value = pic;


      },
      error: function(request, status, error) {
        alert("planDB fatch failed code:" + "\n" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
      }
    });

    function picChkFunc() {
      picChk = 2;

    }

    //저장버튼 이벤트
    $('#btnSave').click(function() {
      if (picChk != 2) picChk == pic;
      document.getElementById("picChk").value = picChk;
      //alert(picChk);
      //document.frm.target = 'ifrm';

      //var temp = chk;
      //alert("rod value : ", temp);

      //체크 여부 확인 후, whatIsRod에 조건에 맞는 값 넣기
      var whatIsRod = 0;
      var radioChk1 = document.getElementById('jb-radio-1');
      var radioChk2 = document.getElementById('jb-radio-2');

      if (radioChk1.checked == true) whatIsRod = 2;
      else if (radioChk2.checked == true) whatIsRod = 1;
      else whatIsRod = 0; //아무것도 선택 안 함
      //document.getElementById("radioGroup").value = whatIsRod;

      document.getElementById("pl_rod").value = whatIsRod;


      document.frm.action = 'edit_insert_.php';
      document.frm.submit();

      //location.href="plan.html";
    });

    // 라디오버튼 이벤트
    // $(document).ready(function(){
    //   var checkedValue = $("input[type=radio][name=radioGroup]:checked").val()
    //    console.log(checkedValue);
    // });

    // var chk=$("input[name=radio]:checked").val();
    // console.log(chk);
    // $(document).ready(function(){
    //     // 라디오버튼 클릭시 이벤트 발생
    //     $(":radio[name=jb-radio]").click(function(){
    //         //제목 선택
    //         if($("input[name=pl_num]:checked").val() == "1"){
    //             $("input:text[name=pl_tit]").attr("disabled",false);
    //             // radio 버튼의 value 값이 1이라면 제목 활성화
    //             console.log(제목);
    //         }
    //         //이미지 선택
    //         else if($("input[name=pl_num]:checked").val() == "2"){
    //               $("input:text[name=pl_tit]").attr("disabled",true);
    //             // radio 버튼의 value 값이 2이라면 이미지 활성화
    //             console.log(이미지);
    //
    //         }
    //     });
    // });

    // 라디오버튼, 제목 클릭 시
    // function clickTit(){
    //   var _abled = document.getElementById('pl_tit') ;
    //   var _disabled = document.getElementById('uploadfile') ;
    //
    //   _abled.disabled = false ;
    //   _disabled.disabled = true ;
    // }
    //
    // // 라디오버튼, 이미지 클릭 시
    // function clickTit(){
    //   var _abled = document.getElementById('uploadfile') ;
    //   var _disabled = document.getElementById('pl_tit') ;
    //
    //   _abled.disabled = true ;
    //   _disabled.disabled = false ;
    // }
    $(document).ready(function() {
      //라디오 버튼, 제목 클릭
      $("#jb-radio-1").click(function() {
        var _abled = document.getElementById('pl_tit');
        var _disabled = document.getElementById('uploadfile');

        _abled.disabled = false;
        _disabled.disabled = true;
      });
      //라디오 버튼, 이미지 클릭
      $("#jb-radio-2").click(function() {
        var _abled = document.getElementById('uploadfile');
        var _disabled = document.getElementById('pl_tit');

        _abled.disabled = false;
        _disabled.disabled = true;
      });
    });
  </script>
</body>

</html>

</html>
